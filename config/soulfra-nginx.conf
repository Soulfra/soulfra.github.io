events {
    worker_connections 1024;
}

http {
    # Character encoding
    charset utf-8;
    charset_types text/plain text/css text/xml text/javascript application/javascript application/json application/xml+rss application/atom+xml image/svg+xml;
    
    upstream growth_platform {
        server growth-platform:8080;
    }
    
    upstream ai_economy {
        server ai-economy:3003;
    }
    
    upstream cal_dashboard {
        server cal-dashboard:4040;
    }
    
    upstream arena {
        server arena:3335;
    }
    
    upstream portal {
        server portal:3000;
    }

    # Main domain
    server {
        listen 80;
        server_name soulfra.com www.soulfra.com;
        
        location / {
            proxy_pass http://portal;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header Accept-Encoding "";
        }
    }
    
    # Growth platform domains
    server {
        listen 80;
        server_name growth.soulfra.com cal.soulfra.com reflection.soulfra.com;
        
        location / {
            proxy_pass http://growth_platform;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header Accept-Encoding "";
        }
    }
    
    # AI Economy domains
    server {
        listen 80;
        server_name economy.soulfra.com ai.soulfra.com robots.soulfra.com;
        
        location / {
            proxy_pass http://ai_economy;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header Accept-Encoding "";
        }
    }
    
    # Gaming domains
    server {
        listen 80;
        server_name arena.soulfra.com battle.soulfra.com game.soulfra.com;
        
        location / {
            proxy_pass http://arena;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header Accept-Encoding "";
        }
    }
    
    # Dashboard domains
    server {
        listen 80;
        server_name dashboard.soulfra.com admin.soulfra.com;
        
        location / {
            proxy_pass http://cal_dashboard;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header Accept-Encoding "";
        }
    }
    
    # Industry-specific domains (all route to growth platform)
    server {
        listen 80;
        server_name ~^(healthcare|finance|education|gaming|tech|sports|music|art|food|travel|fitness|beauty|fashion|real-estate|law|marketing|sales|hr|consulting|nonprofit)\.soulfra\.com$;
        
        location / {
            proxy_pass http://growth_platform;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header Accept-Encoding "";
            proxy_set_header X-Industry $1;
        }
    }
}