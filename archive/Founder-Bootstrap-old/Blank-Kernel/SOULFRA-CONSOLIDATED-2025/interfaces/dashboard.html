<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MirrorOS - Unified Local Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a;
            color: #fff;
            overflow-x: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 20px;
            text-align: center;
            position: relative;
            border-bottom: 1px solid #333;
        }

        .header h1 {
            font-size: 32px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }

        .header .subtitle {
            color: #888;
            font-size: 14px;
        }

        .nav-tabs {
            display: flex;
            background: #1a1a2e;
            border-bottom: 1px solid #333;
            overflow-x: auto;
        }

        .nav-tab {
            padding: 15px 20px;
            cursor: pointer;
            border: none;
            background: transparent;
            color: #888;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            white-space: nowrap;
            border-bottom: 3px solid transparent;
        }

        .nav-tab:hover {
            color: #fff;
            background: rgba(102, 126, 234, 0.1);
        }

        .nav-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }

        .tab-content {
            display: none;
            padding: 30px;
            min-height: calc(100vh - 140px);
        }

        .tab-content.active {
            display: block;
        }

        .card {
            background: #1a1a2e;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #333;
        }

        .card h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 20px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #333;
            color: #fff;
        }

        .btn-secondary:hover {
            background: #444;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #888;
            font-size: 14px;
        }

        .input-group input,
        .input-group select,
        .input-group textarea {
            width: 100%;
            padding: 12px;
            background: #0a0a0a;
            border: 1px solid #333;
            border-radius: 8px;
            color: #fff;
            font-size: 14px;
        }

        .input-group input:focus,
        .input-group select:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-active {
            background: rgba(68, 255, 68, 0.2);
            color: #44ff44;
            border: 1px solid #44ff44;
        }

        .status-offline {
            background: rgba(255, 68, 68, 0.2);
            color: #ff4444;
            border: 1px solid #ff4444;
        }

        .chat-container {
            height: 400px;
            border: 1px solid #333;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            background: #0a0a0a;
        }

        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
        }

        .chat-input-area {
            border-top: 1px solid #333;
            padding: 15px;
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 10px;
            background: transparent;
            border: none;
            color: #fff;
            outline: none;
        }

        .message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 10px;
            max-width: 80%;
        }

        .message.user {
            background: #667eea;
            margin-left: auto;
            text-align: right;
        }

        .message.cal {
            background: #333;
            margin-right: auto;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #0a0a0a;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #333;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #888;
            font-size: 12px;
            text-transform: uppercase;
        }

        .logs-container {
            background: #000;
            border-radius: 8px;
            padding: 15px;
            height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
        }

        .log-entry {
            margin-bottom: 5px;
            opacity: 0.8;
        }

        .log-timestamp {
            color: #888;
        }

        .log-module {
            color: #667eea;
            font-weight: bold;
        }

        .log-action {
            color: #44ff44;
        }

        .export-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .export-option {
            background: #0a0a0a;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #333;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .export-option:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }

        .export-option.selected {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        .rating-stars {
            display: flex;
            gap: 5px;
            margin: 10px 0;
        }

        .star {
            font-size: 24px;
            color: #333;
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .star.active {
            color: #ffa500;
        }

        .qr-scanner {
            background: #0a0a0a;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 2px dashed #333;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .location-info {
            background: #1a1a2e;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: #fff;
            font-weight: 600;
            z-index: 1000;
            max-width: 300px;
            animation: slideIn 0.3s ease;
        }

        .notification.success {
            background: #44ff44;
            color: #000;
        }

        .notification.error {
            background: #ff4444;
        }

        .notification.info {
            background: #667eea;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .vault-status {
            background: #0a0a0a;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #333;
            margin-bottom: 15px;
        }

        .vault-path {
            font-family: 'Courier New', monospace;
            color: #667eea;
            font-size: 12px;
            background: #000;
            padding: 8px;
            border-radius: 4px;
            margin-top: 8px;
        }

        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .export-options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>MirrorOS</h1>
        <p class="subtitle">Unified Local Platform - All Systems Operational</p>
    </div>

    <div class="nav-tabs">
        <button class="nav-tab active" onclick="showTab('chat')">üí¨ Chat</button>
        <button class="nav-tab" onclick="showTab('builder')">üõ†Ô∏è Agent Builder</button>
        <button class="nav-tab" onclick="showTab('export')">üí∞ Export & Stripe</button>
        <button class="nav-tab" onclick="showTab('vibe')">üéµ Vibe Reviews</button>
        <button class="nav-tab" onclick="showTab('qr')">üì± QR Check-in</button>
        <button class="nav-tab" onclick="showTab('operator')">üìä Operator Dashboard</button>
    </div>

        <!-- Tab Content -->
        <main class="dashboard-content">
            <!-- Agent Builder -->
            <div class="tab-content active" id="agent-builder">
                <div class="content-header">
                    <h2>Agent Builder</h2>
                    <p>Create custom agents that reflect through the sovereign vault</p>
                </div>
                <div class="agent-builder-content"></div>
            </div>

            <!-- Prompt Router -->
            <div class="tab-content" id="prompt-router">
                <div class="content-header">
                    <h2>Prompt Router</h2>
                    <p>Route prompts through different LLM providers</p>
                </div>
                <div class="prompt-router-content"></div>
            </div>

            <!-- Vault Viewer -->
            <div class="tab-content" id="vault-viewer">
                <div class="content-header">
                    <h2>Vault Viewer</h2>
                    <p>Explore memory strings, weights, and tone maps</p>
                </div>
                <div class="vault-viewer-content"></div>
            </div>

            <!-- Loop Visualizer -->
            <div class="tab-content" id="loop-visualizer">
                <div class="content-header">
                    <h2>Loop Visualizer</h2>
                    <p>Visualize agent forks and reflection loops</p>
                </div>
                <div class="loop-visualizer-content"></div>
            </div>

            <!-- Enterprise Tab -->
            <div class="tab-content" id="enterprise">
                <div class="content-header">
                    <h2>Enterprise Controls</h2>
                    <p>Advanced vault management (Tier 4+ only)</p>
                </div>
                <div class="enterprise-content"></div>
            </div>

            <!-- Platform Walkthrough -->
            <div class="tab-content" id="walkthrough">
                <div class="content-header">
                    <h2>Launch Your Agent Platform</h2>
                    <p>Get started with MirrorOS in 5 minutes</p>
                </div>
                <div class="walkthrough-content"></div>
            </div>

            <!-- Affiliate Tab -->
            <div class="tab-content" id="affiliate">
                <div class="content-header">
                    <h2>Affiliate & Invite</h2>
                    <p>Grow your network and earn vault credits</p>
                </div>
                <div class="affiliate-content"></div>
            </div>
            
            <!-- Automations Tab -->
            <div class="tab-content" id="automations">
                <div class="content-header">
                    <h2>üîÑ Import Automations</h2>
                    <p>Transform your existing workflows into sovereign agents</p>
                </div>
                <div class="automations-content">
                    <div class="drag-drop-zone" id="automationDropZone">
                        <div class="drop-content">
                            <span class="drop-icon">üì§</span>
                            <h3>Drag & Drop Automation Files</h3>
                            <p>Supports: n8n (.json), Make.com (.json), Notion exports</p>
                            <button class="btn-secondary" onclick="document.getElementById('automationFileInput').click()">
                                Or Browse Files
                            </button>
                            <input type="file" id="automationFileInput" accept=".json,.yaml" style="display: none;" onchange="handleAutomationFile(event)">
                        </div>
                    </div>
                    
                    <div class="automation-status" id="automationStatus" style="display: none;">
                        <h4>Import Status</h4>
                        <div class="status-content"></div>
                    </div>
                    
                    <div class="imported-automations">
                        <h3>Imported Automations</h3>
                        <div id="automationsList" class="automations-grid">
                            <div class="empty-state">
                                <span>No automations imported yet</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <div class="footer-left">
                <span class="connection-status">
                    <span class="status-dot connected"></span>
                    Connected to Platform
                </span>
                <span class="credits-display">
                    Credits: <span id="userCredits">100</span>
                </span>
            </div>
            <div class="footer-right">
                <span class="reflection-count">Reflections: <span id="reflectionCount">0</span></span>
                <span class="fork-count">Forks: <span id="forkCount">0</span></span>
                <span class="loop-count">Loops: <span id="loopCount">0</span></span>
            </div>
        </footer>
    </div>

    <!-- Modal for QR Reflection -->
    <div class="modal" id="qrModal">
        <div class="modal-content">
            <h3>Restart Reflection</h3>
            <p>Enter QR code to restart sovereign reflection:</p>
            <input type="text" id="qrInput" placeholder="qr-founder-0000">
            <div class="modal-buttons">
                <button class="btn-secondary" onclick="closeQRModal()">Cancel</button>
                <button class="btn-primary" onclick="restartReflection()">Restart</button>
            </div>
        </div>
    </div>
    
    <!-- Export Modal -->
    <div class="modal" id="exportModal" style="display: none;">
        <div class="modal-content export-modal">
            <h3>Export <span id="exportType"></span></h3>
            <div class="export-preview">
                <div class="export-info">
                    <div class="info-row">
                        <span>Item:</span>
                        <strong id="exportItemName">-</strong>
                    </div>
                    <div class="info-row">
                        <span>Complexity:</span>
                        <strong id="exportComplexity">-</strong>
                    </div>
                    <div class="info-row">
                        <span>Cost:</span>
                        <strong><span id="exportCost">0</span> credits</strong>
                    </div>
                </div>
                
                <div class="export-options">
                    <label class="checkbox-label">
                        <input type="checkbox" id="includeVault" onchange="updateExportCost()">
                        Include vault data (+10 credits)
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="includeSecrets">
                        Include API credentials
                    </label>
                </div>
                
                <div class="payment-options">
                    <h4>Payment Method</h4>
                    <label class="radio-label">
                        <input type="radio" name="paymentMethod" value="credits" checked>
                        Use Credits (Balance: <span id="modalCredits">100</span>)
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="paymentMethod" value="invoice">
                        Bill Me Later
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="paymentMethod" value="stripe">
                        Pay Now (Stripe)
                    </label>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn-secondary" onclick="closeExportModal()">Cancel</button>
                <button class="btn-primary" id="confirmExportBtn" onclick="confirmExport()">Export</button>
            </div>
        </div>
    </div>
    
    <!-- Billing Modal -->
    <div class="modal" id="billingModal" style="display: none;">
        <div class="modal-content billing-modal">
            <h3>Billing & Credits</h3>
            <div class="billing-info">
                <div class="credit-balance">
                    <h4>Current Balance</h4>
                    <div class="balance-display">
                        <span class="balance-amount" id="creditBalance">100</span>
                        <span class="balance-label">credits</span>
                    </div>
                </div>
                
                <div class="usage-summary">
                    <h4>Recent Usage</h4>
                    <div class="usage-list" id="recentUsage">
                        <div class="usage-item">
                            <span>Loading...</span>
                        </div>
                    </div>
                </div>
                
                <div class="purchase-credits">
                    <h4>Purchase Credits</h4>
                    <div class="credit-packages">
                        <button class="credit-package" onclick="purchaseCredits(100, 10)">
                            <span class="package-credits">100</span>
                            <span class="package-price">$10</span>
                        </button>
                        <button class="credit-package" onclick="purchaseCredits(500, 40)">
                            <span class="package-credits">500</span>
                            <span class="package-price">$40</span>
                            <span class="package-badge">20% off</span>
                        </button>
                        <button class="credit-package" onclick="purchaseCredits(1000, 70)">
                            <span class="package-credits">1000</span>
                            <span class="package-price">$70</span>
                            <span class="package-badge">30% off</span>
                        </button>
                    </div>
                </div>
                
                <div class="invoice-section">
                    <h4>Pending Invoice</h4>
                    <div id="pendingInvoice">
                        <p>No pending charges</p>
                    </div>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn-secondary" onclick="closeBillingModal()">Close</button>
                <button class="btn-primary" onclick="payInvoice()">Pay Invoice</button>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
</body>
</html>