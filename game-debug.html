<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soulfra Domain Game - DEBUG MODE</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .debug-panel {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            border: 2px solid rgba(255, 255, 0, 0.5);
            font-family: monospace;
            font-size: 0.9rem;
        }

        .debug-panel h2 {
            color: #FFD700;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .debug-section {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .debug-section h3 {
            color: #FFA500;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .debug-line {
            margin: 0.5rem 0;
            padding: 0.25rem 0;
        }

        .debug-value {
            color: #00FF00;
            font-weight: bold;
        }

        .debug-error {
            color: #FF6B6B;
            font-weight: bold;
        }

        .debug-success {
            color: #51CF66;
            font-weight: bold;
        }

        h1 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .puzzle-number {
            font-size: 1rem;
            opacity: 0.8;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .emoji-display {
            font-size: 4rem;
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            text-align: center;
        }

        .hint {
            font-size: 1rem;
            margin-bottom: 1.5rem;
            opacity: 0.9;
            text-align: center;
        }

        .guess-input {
            width: 100%;
            padding: 1rem;
            font-size: 1.2rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-align: center;
            margin-bottom: 1rem;
        }

        .guess-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .submit-btn {
            width: 100%;
            padding: 1rem 2rem;
            font-size: 1.2rem;
            font-weight: bold;
            background: white;
            color: #667eea;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
        }

        .attempts {
            margin-top: 1.5rem;
            display: flex;
            justify-content: center;
            gap: 0.5rem;
        }

        .attempt-box {
            width: 40px;
            height: 40px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .attempt-box.correct {
            background: #4CAF50;
            border-color: #4CAF50;
        }

        .attempt-box.wrong {
            background: #f44336;
            border-color: #f44336;
        }

        .result {
            margin-top: 2rem;
            padding: 1.5rem;
            border-radius: 10px;
            display: none;
        }

        .result.success {
            background: rgba(76, 175, 80, 0.3);
            border: 2px solid #4CAF50;
            display: block;
        }

        .result.failure {
            background: rgba(244, 67, 54, 0.3);
            border: 2px solid #f44336;
            display: block;
        }

        .back-link {
            display: inline-block;
            margin-top: 2rem;
            color: white;
            text-decoration: none;
            opacity: 0.8;
            text-align: center;
            display: block;
        }

        .back-link:hover {
            opacity: 1;
        }

        @media (max-width: 968px) {
            .container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- GAME PANEL -->
        <div class="game-container">
            <h1>üéÆ Soulfra Domain Game</h1>
            <p class="puzzle-number">Puzzle #<span id="puzzle-number">0</span></p>

            <div class="emoji-display" id="emoji-clue">üé®</div>

            <p class="hint">Guess the domain from the emoji!</p>

            <input
                type="text"
                class="guess-input"
                id="guess-input"
                placeholder="Enter domain name (e.g., soulfra)"
                autocomplete="off"
                oninput="updateDebugInput()"
            >

            <button class="submit-btn" id="submit-btn" onclick="submitGuess()">
                Submit Guess
            </button>

            <div class="attempts" id="attempts"></div>

            <div class="result" id="result"></div>

            <a href="/index.html" class="back-link">‚Üê Back to Home</a>
        </div>

        <!-- DEBUG PANEL -->
        <div class="debug-panel">
            <h2>üîç DEBUG MODE</h2>

            <div class="debug-section">
                <h3>Date Calculation</h3>
                <div id="debug-date"></div>
            </div>

            <div class="debug-section">
                <h3>Current Puzzle</h3>
                <div id="debug-puzzle"></div>
            </div>

            <div class="debug-section">
                <h3>Your Input</h3>
                <div id="debug-input">
                    <div class="debug-line">Waiting for input...</div>
                </div>
            </div>

            <div class="debug-section">
                <h3>Comparison Check</h3>
                <div id="debug-comparison">
                    <div class="debug-line">Submit a guess to see comparison</div>
                </div>
            </div>

            <div class="debug-section">
                <h3>All Domains</h3>
                <div id="debug-domains"></div>
            </div>

            <div class="debug-section">
                <h3>Attempts Log</h3>
                <div id="debug-attempts">
                    <div class="debug-line">No attempts yet</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ALL YOUR DOMAINS - Unique emoji for each!
        const DOMAINS = [
            { name: 'soulfra', full: 'soulfra.com', emoji: 'üåê', category: 'platform' },
            { name: 'cringeproof', full: 'cringeproof.com', emoji: 'üé™', category: 'social' },
            { name: 'deathtodata', full: 'deathtodata.com', emoji: 'üå≥', category: 'privacy' },
            { name: 'calriven', full: 'calriven.com', emoji: 'üéπ', category: 'writing' },
            { name: 'stpetepros', full: 'stpetepros.com', emoji: 'üèñÔ∏è', category: 'local' },
            { name: 'blamechain', full: 'blamechain.com', emoji: '‚õìÔ∏è', category: 'crypto' }
        ];

        // Game state
        let attempts = [];
        let maxAttempts = 6;
        let currentDomain;
        let puzzleNumber;
        let gameOver = false;

        // Get today's puzzle (deterministic based on date)
        function getTodaysPuzzle() {
            // Use UTC to ensure same puzzle worldwide regardless of timezone
            const today = new Date();
            const utcYear = today.getUTCFullYear();
            const utcMonth = today.getUTCMonth();
            const utcDate = today.getUTCDate();
            const todayUTC = new Date(Date.UTC(utcYear, utcMonth, utcDate));

            const startDate = new Date(Date.UTC(2026, 0, 1)); // Jan 1, 2026 UTC
            const daysSinceStart = Math.floor((todayUTC - startDate) / (1000 * 60 * 60 * 24));

            puzzleNumber = daysSinceStart + 1;
            const domainIndex = daysSinceStart % DOMAINS.length;

            // DEBUG: Log calculations
            updateDebugDate(todayUTC, startDate, daysSinceStart, domainIndex);

            return {
                domain: DOMAINS[domainIndex],
                number: puzzleNumber
            };
        }

        // Initialize game
        function initGame() {
            const puzzle = getTodaysPuzzle();
            currentDomain = puzzle.domain;
            puzzleNumber = puzzle.number;

            document.getElementById('puzzle-number').textContent = puzzleNumber;
            document.getElementById('emoji-clue').textContent = currentDomain.emoji;

            // Update debug panels
            updateDebugPuzzle();
            updateDebugDomains();

            // Create attempt boxes
            const attemptsEl = document.getElementById('attempts');
            for (let i = 0; i < maxAttempts; i++) {
                const box = document.createElement('div');
                box.className = 'attempt-box';
                box.id = `attempt-${i}`;
                attemptsEl.appendChild(box);
            }

            // Enable enter key
            document.getElementById('guess-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    submitGuess();
                }
            });
        }

        // Update debug: Date calculation
        function updateDebugDate(today, startDate, daysSince, index) {
            const html = `
                <div class="debug-line">Today: <span class="debug-value">${today.toDateString()}</span></div>
                <div class="debug-line">Start: <span class="debug-value">${startDate.toDateString()}</span></div>
                <div class="debug-line">Days Since: <span class="debug-value">${daysSince}</span></div>
                <div class="debug-line">Puzzle #: <span class="debug-value">${daysSince + 1}</span></div>
                <div class="debug-line">Domain Index: <span class="debug-value">${index} (${daysSince} % ${DOMAINS.length})</span></div>
            `;
            document.getElementById('debug-date').innerHTML = html;
        }

        // Update debug: Current puzzle
        function updateDebugPuzzle() {
            const html = `
                <div class="debug-line">Name: <span class="debug-value">${currentDomain.name}</span></div>
                <div class="debug-line">Full: <span class="debug-value">${currentDomain.full}</span></div>
                <div class="debug-line">Emoji: <span class="debug-value">${currentDomain.emoji}</span></div>
                <div class="debug-line">Category: <span class="debug-value">${currentDomain.category}</span></div>
                <div class="debug-line" style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.2);">
                    ‚úÖ Correct answers: <span class="debug-success">"${currentDomain.name}"</span> OR <span class="debug-success">"${currentDomain.full}"</span>
                </div>
            `;
            document.getElementById('debug-puzzle').innerHTML = html;
        }

        // Update debug: All domains
        function updateDebugDomains() {
            let html = '';
            DOMAINS.forEach((d, i) => {
                const isCurrent = d.name === currentDomain.name;
                html += `<div class="debug-line" style="${isCurrent ? 'color: #FFD700; font-weight: bold;' : ''}">
                    ${i}: ${d.emoji} ${d.name} ${isCurrent ? '‚Üê TODAY' : ''}
                </div>`;
            });
            document.getElementById('debug-domains').innerHTML = html;
        }

        // Update debug: Input
        function updateDebugInput() {
            const input = document.getElementById('guess-input');
            const rawValue = input.value;
            const processedValue = rawValue.toLowerCase().trim();

            const html = `
                <div class="debug-line">Raw input: <span class="debug-value">"${rawValue}"</span></div>
                <div class="debug-line">Processed: <span class="debug-value">"${processedValue}"</span></div>
                <div class="debug-line">Length: <span class="debug-value">${processedValue.length} chars</span></div>
            `;
            document.getElementById('debug-input').innerHTML = html;
        }

        // Submit guess
        function submitGuess() {
            console.log('üîµ submitGuess() called');

            if (gameOver) {
                console.log('üî¥ Game already over, returning');
                return;
            }

            const input = document.getElementById('guess-input');
            const guess = input.value.toLowerCase().trim();

            console.log('üîµ Guess:', guess);
            console.log('üîµ Current domain name:', currentDomain.name);
            console.log('üîµ Current domain full:', currentDomain.full);

            if (!guess) {
                alert('Please enter a guess!');
                return;
            }

            // Check if correct (match base name)
            const isCorrect = guess === currentDomain.name || guess === currentDomain.full;

            console.log('üîµ Is correct?', isCorrect);
            console.log('üîµ Guess === name?', guess === currentDomain.name);
            console.log('üîµ Guess === full?', guess === currentDomain.full);

            // Update debug comparison
            updateDebugComparison(guess, isCorrect);

            // Record attempt
            attempts.push({
                guess: guess,
                correct: isCorrect
            });

            // Update debug attempts
            updateDebugAttempts();

            // Update attempt box
            const attemptBox = document.getElementById(`attempt-${attempts.length - 1}`);
            if (isCorrect) {
                console.log('‚úÖ CORRECT! Calling winGame()');
                attemptBox.textContent = '‚úì';
                attemptBox.classList.add('correct');
                winGame();
            } else {
                console.log('‚ùå WRONG!');
                attemptBox.textContent = '‚úó';
                attemptBox.classList.add('wrong');

                if (attempts.length >= maxAttempts) {
                    loseGame();
                } else {
                    input.value = '';
                    input.focus();
                }
            }
        }

        // Update debug: Comparison
        function updateDebugComparison(guess, isCorrect) {
            const matchName = guess === currentDomain.name;
            const matchFull = guess === currentDomain.full;

            const html = `
                <div class="debug-line">Your guess: <span class="debug-value">"${guess}"</span></div>
                <div class="debug-line">Match name? <span class="${matchName ? 'debug-success' : 'debug-error'}">${matchName ? '‚úÖ YES' : '‚ùå NO'}</span> ("${guess}" === "${currentDomain.name}")</div>
                <div class="debug-line">Match full? <span class="${matchFull ? 'debug-success' : 'debug-error'}">${matchFull ? '‚úÖ YES' : '‚ùå NO'}</span> ("${guess}" === "${currentDomain.full}")</div>
                <div class="debug-line" style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.2);">
                    Result: <span class="${isCorrect ? 'debug-success' : 'debug-error'}">${isCorrect ? '‚úÖ CORRECT!' : '‚ùå WRONG'}</span>
                </div>
            `;
            document.getElementById('debug-comparison').innerHTML = html;
        }

        // Update debug: Attempts
        function updateDebugAttempts() {
            let html = '';
            attempts.forEach((attempt, i) => {
                html += `<div class="debug-line">
                    Attempt ${i + 1}: <span class="${attempt.correct ? 'debug-success' : 'debug-error'}">"${attempt.guess}"</span> ${attempt.correct ? '‚úÖ' : '‚ùå'}
                </div>`;
            });
            document.getElementById('debug-attempts').innerHTML = html || '<div class="debug-line">No attempts yet</div>';
        }

        // Win game
        function winGame() {
            console.log('üéâ winGame() called');
            gameOver = true;
            const resultEl = document.getElementById('result');

            resultEl.className = 'result success';
            resultEl.innerHTML = `
                <h2>üéâ Correct!</h2>
                <p>You guessed <strong>${currentDomain.full}</strong> in ${attempts.length} ${attempts.length === 1 ? 'try' : 'tries'}!</p>
                <p style="margin-top: 1rem;">Redirecting to ${currentDomain.full} in 3 seconds...</p>
            `;

            document.getElementById('guess-input').disabled = true;
            document.getElementById('submit-btn').disabled = true;

            // Redirect after 3 seconds
            console.log('‚è≥ Setting redirect timeout for https://' + currentDomain.full);
            setTimeout(() => {
                console.log('üöÄ Redirecting to https://' + currentDomain.full);
                window.location.href = `https://${currentDomain.full}`;
            }, 3000);
        }

        // Lose game
        function loseGame() {
            gameOver = true;
            const resultEl = document.getElementById('result');

            resultEl.className = 'result failure';
            resultEl.innerHTML = `
                <h2>üòî Game Over</h2>
                <p>The domain was <strong>${currentDomain.full}</strong></p>
                <p style="margin-top: 1rem;">Try again tomorrow!</p>
                <button class="copy-btn" onclick="location.reload()">üîÑ Play Again</button>
            `;

            document.getElementById('guess-input').disabled = true;
            document.getElementById('submit-btn').disabled = true;
        }

        // Initialize on page load
        console.log('üü¢ Page loaded, calling initGame()');
        initGame();
        console.log('üü¢ initGame() complete');
        console.log('üü¢ Current puzzle:', currentDomain);
    </script>
</body>
</html>
