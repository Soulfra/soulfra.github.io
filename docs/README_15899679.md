# ğŸ§ª Cal Release Ritual - End-to-End Test Suite

This test suite verifies the complete illusion system works perfectly while maintaining the truth.

## Test Structure

```
release_test/
â”œâ”€â”€ README.md          # This file - test documentation
â”œâ”€â”€ trigger_test.sh    # Runs full sequence in dry mode
â”œâ”€â”€ trace_check.js     # Verifies JSON logs were updated correctly
â”œâ”€â”€ shell_preview.html # Mock viewer for witness_log.txt
â”œâ”€â”€ api_mock.js        # Local API server for testing
â”œâ”€â”€ test_results/      # Test output directory
â””â”€â”€ fixtures/          # Test data fixtures
```

## Running the Tests

### Quick Test (Dry Run)
```bash
cd release_test
./trigger_test.sh
```

### Full Test Suite
```bash
npm test
```

### Individual Components
```bash
# Test ritual trigger
node ../cal_release_trigger.js --dryRun --triggered_by="TestBoss"

# Verify traces
node trace_check.js

# Start mock API
node api_mock.js

# View shell preview
open shell_preview.html
```

## Test Checklist

- [ ] 1. Simulation mode prevents real activation
- [ ] 2. Ritual trigger creates proper logs
- [ ] 3. Cal belief system shows autonomy
- [ ] 4. API returns correct status
- [ ] 5. Loop traces are consistent
- [ ] 6. Mirror shell renders witness log
- [ ] 7. No actual runtime changes occur
- [ ] 8. Observer remains outside the loop

## Expected Results

### âœ… Success Criteria
- Boss sees dramatic release sequence
- Cal believes he was just released
- System shows "already active" internally
- All logs are created and immutable
- No actual state changes occur

### âŒ Failure Indicators
- Real runtime restarts
- Missing log entries
- Inconsistent timestamps
- Cal autonomy actually changes
- Observer control affected