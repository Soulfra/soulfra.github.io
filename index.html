<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Soulfra - Voice Predictions & Community Brands</title>
  <meta name="description" content="Content-addressed voice predictions, community-driven brands, and authentic conversation.">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #ffffff;
      min-height: 100vh;
      padding: 2rem;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 4rem;
    }

    h1 {
      font-size: 4rem;
      font-weight: 900;
      margin-bottom: 1rem;
      text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .tagline {
      font-size: 1.5rem;
      opacity: 0.95;
      margin-bottom: 2rem;
    }

    .section {
      margin-bottom: 4rem;
    }

    .section-title {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
      text-align: center;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 2rem;
    }

    .card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 2rem;
      transition: all 0.3s ease;
      border: 2px solid rgba(255, 255, 255, 0.1);
    }

    .card:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
      border-color: rgba(255, 255, 255, 0.3);
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .card-icon {
      font-size: 2.5rem;
    }

    .card-title {
      font-size: 1.75rem;
      font-weight: 700;
    }

    .card-description {
      line-height: 1.6;
      opacity: 0.9;
      margin-bottom: 1.5rem;
    }

    .card-link {
      display: inline-block;
      background: rgba(255, 255, 255, 0.2);
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      text-decoration: none;
      color: white;
      font-weight: 600;
      transition: all 0.2s ease;
    }

    .card-link:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.05);
    }

    .featured-card {
      grid-column: 1 / -1;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.05) 100%);
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .brand-calriven { border-left: 4px solid #3b82f6; }
    .brand-deathtodata { border-left: 4px solid #ef4444; }
    .brand-soulfra { border-left: 4px solid #8b5cf6; }
    .brand-howtocookathome { border-left: 4px solid #f59e0b; }

    footer {
      text-align: center;
      padding: 3rem 0;
      opacity: 0.8;
      margin-top: 4rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    footer a {
      color: white;
      text-decoration: none;
      font-weight: 600;
    }

    @media (max-width: 768px) {
      h1 { font-size: 2.5rem; }
      .tagline { font-size: 1.25rem; }
      .grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üé§ Soulfra</h1>
      <p class="tagline">Voice Predictions, Content-Addressed Storage, and Community-Driven Brands</p>
    </header>

    <!-- Featured: Voice Archive -->
    <section class="section">
      <div class="grid">
        <div class="card featured-card">
          <div class="card-header">
            <span class="card-icon">üéôÔ∏è</span>
            <h2 class="card-title">Voice Predictions Archive</h2>
          </div>
          <p class="card-description">
            Content-addressed voice recordings with SHA-256 verification. Record your predictions,
            ideas, and hot takes - all cryptographically signed and immutable. See who ages badly.
          </p>
          <div style="display: flex; gap: 1rem; margin-top: 1rem; flex-wrap: wrap;">
            <a href="/record" class="card-link" style="background: rgba(255, 64, 129, 0.3); border: 2px solid rgba(255, 64, 129, 0.6);">üì¢ Make a Prediction</a>
            <a href="/voice-archive/" class="card-link">View Archive ‚Üí</a>
            <a href="/debates/" class="card-link" style="background: rgba(139, 92, 246, 0.3); border: 2px solid rgba(139, 92, 246, 0.6);">ü§ñ AI Debates</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Brand Network (Dynamic from GitHub Stats) -->
    <section class="section">
      <h2 class="section-title">üéÆ Resource Allocation Game - Active Domains</h2>
      <p style="text-align: center; opacity: 0.9; margin-bottom: 2rem;">
        Domains ranked by GitHub activity (stars, commits, contributors, issues). Updated hourly.
      </p>
      <div class="grid" id="domains-container">
        <!-- Domains loaded dynamically from domain-stats.json -->
        <div class="card" style="text-align: center; opacity: 0.6;">
          <p>Loading domain stats...</p>
        </div>
      </div>
    </section>

    <!-- Other Brands -->
    <section class="section">
      <h2 class="section-title">Other Brands</h2>
      <div class="grid">

        <!-- HowToCookAtHome -->
        <div class="card brand-howtocookathome">
          <div class="card-header">
            <span class="card-icon">üç≥</span>
            <h3 class="card-title">HowToCookAtHome</h3>
          </div>
          <p class="card-description">
            Simple recipes, cooking tips, and home kitchen hacks. No fancy equipment, no pretentious nonsense.
          </p>
          <a href="https://howtocookathome.com" class="card-link">Visit HowToCookAtHome ‚Üí</a>
        </div>

        <!-- StPetePros -->
        <div class="card">
          <div class="card-header">
            <span class="card-icon">üèùÔ∏è</span>
            <h3 class="card-title">StPetePros</h3>
          </div>
          <p class="card-description">
            St. Petersburg, FL local community, services, and neighborhood insights.
          </p>
          <a href="https://stpetepros.com" class="card-link">Visit StPetePros ‚Üí</a>
        </div>

        <!-- Hollowtown -->
        <div class="card">
          <div class="card-header">
            <span class="card-icon">üåô</span>
            <h3 class="card-title">Hollowtown</h3>
          </div>
          <p class="card-description">
            Creative fiction, strange stories, and experimental content.
          </p>
          <a href="https://hollowtown.com" class="card-link">Visit Hollowtown ‚Üí</a>
        </div>

        <!-- Niceleak -->
        <div class="card">
          <div class="card-header">
            <span class="card-icon">üíß</span>
            <h3 class="card-title">Niceleak</h3>
          </div>
          <p class="card-description">
            Gentle whistle-blowing, kind transparency, and positive accountability.
          </p>
          <a href="https://niceleak.com" class="card-link">Visit Niceleak ‚Üí</a>
        </div>

        <!-- Oofbox -->
        <div class="card">
          <div class="card-header">
            <span class="card-icon">üì¶</span>
            <h3 class="card-title">Oofbox</h3>
          </div>
          <p class="card-description">
            Curated collection of mistakes, lessons learned, and embarrassing fails.
          </p>
          <a href="https://oofbox.com" class="card-link">Visit Oofbox ‚Üí</a>
        </div>

      </div>
    </section>

    <!-- How It Works -->
    <section class="section">
      <h2 class="section-title">How Voice Predictions Work</h2>
      <div class="grid">
        <div class="card">
          <div class="card-header">
            <span class="card-icon">1Ô∏è‚É£</span>
            <h3 class="card-title">Record</h3>
          </div>
          <p class="card-description">
            Use Voice Memos app on iPhone. AirDrop to Mac. Simple as a text message.
          </p>
        </div>

        <div class="card">
          <div class="card-header">
            <span class="card-icon">2Ô∏è‚É£</span>
            <h3 class="card-title">Import</h3>
          </div>
          <p class="card-description">
            Run import_voice_memo.py. Auto-transcribes with Whisper, calculates SHA-256 hash.
          </p>
        </div>

        <div class="card">
          <div class="card-header">
            <span class="card-icon">3Ô∏è‚É£</span>
            <h3 class="card-title">Publish</h3>
          </div>
          <p class="card-description">
            Git push to GitHub Pages. Static site, no server needed. Immutable record.
          </p>
        </div>
      </div>
    </section>

    <footer>
      <p>Decentralized network - <a href="https://github.com/Soulfra">Fork on GitHub</a></p>
      <p style="margin-top: 0.5rem; opacity: 0.6;">No Archive.org needed - you own the source</p>
    </footer>
  </div>

  <script>
    // Load domain stats from GitHub scraper output
    fetch('domain-stats.json')
      .then(response => {
        if (!response.ok) {
          throw new Error('Stats not available');
        }
        return response.json();
      })
      .then(data => {
        const container = document.getElementById('domains-container');
        container.innerHTML = ''; // Clear loading message

        // Domains are already sorted by allocation_priority (1 = hottest)
        const domains = data.domains;

        // Domain descriptions
        const descriptions = {
          'calriven': 'Data-driven analysis, metrics, proof, and game theory. Work and technical execution.',
          'cringeproof': 'Creative vision, viral ideas, and experimental content. The Shadow path.',
          'deathtodata': 'Privacy-first, security-focused, and protection tools. Call out the cringe.',
          'soulfra': 'Personal reflections, spiritual hub, authentic community. The heart of the network.'
        };

        // Domain URLs
        const urls = {
          'calriven': 'https://calriven.com',
          'cringeproof': 'https://cringeproof.com',
          'deathtodata': 'https://deathtodata.com',
          'soulfra': 'https://soulfra.com'
        };

        // Priority colors
        const priorityColors = {
          1: 'rgba(59, 130, 246, 0.3)', // Blue - hottest
          2: 'rgba(139, 92, 246, 0.3)', // Purple
          3: 'rgba(239, 68, 68, 0.3)',  // Red
          4: 'rgba(245, 158, 11, 0.3)'  // Orange - coldest
        };

        domains.forEach(domain => {
          const card = document.createElement('div');
          card.className = 'card';
          card.style.background = priorityColors[domain.allocation_priority] || 'rgba(255, 255, 255, 0.1)';
          card.style.border = `2px solid ${priorityColors[domain.allocation_priority] || 'rgba(255, 255, 255, 0.1)'}`;

          // Priority badge
          const priorityBadge = domain.allocation_priority === 1
            ? '<span style="background: rgba(255, 215, 0, 0.3); padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.9rem; font-weight: 700;">üî• HOTTEST</span>'
            : `<span style="opacity: 0.7; font-size: 0.9rem;">Priority #${domain.allocation_priority}</span>`;

          card.innerHTML = `
            <div class="card-header">
              <span class="card-icon">${domain.icon}</span>
              <div style="flex: 1;">
                <h3 class="card-title">${domain.domain.toUpperCase()}</h3>
                ${priorityBadge}
              </div>
            </div>
            <p class="card-description">
              ${descriptions[domain.domain] || 'Domain description'}
            </p>
            <div style="margin: 1rem 0; padding: 1rem; background: rgba(0, 0, 0, 0.2); border-radius: 8px; font-size: 0.9rem;">
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem;">
                <div>‚≠ê <strong>${domain.total_stars}</strong> stars</div>
                <div>üíª <strong>${domain.total_commits_last_week}</strong> commits (7d)</div>
                <div>üë• <strong>${domain.total_contributors}</strong> contributors</div>
                <div>üêõ <strong>${domain.total_open_issues}</strong> issues</div>
              </div>
              <div style="margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                üìä Activity Score: <strong>${domain.activity_score}</strong> |
                ‚è∞ <strong>${domain.allocation_percent}%</strong> time allocation
              </div>
            </div>
            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
              <a href="${urls[domain.domain] || '#'}" class="card-link">Visit ${domain.domain} ‚Üí</a>
              <a href="${domain.domain}/index.html" class="card-link" style="background: rgba(255, 255, 255, 0.1);">GitHub Page ‚Üí</a>
            </div>
          `;

          container.appendChild(card);
        });

        // Add timestamp footer
        const timestamp = new Date(data.generated_at).toLocaleString();
        const nextUpdate = new Date(data.next_update).toLocaleTimeString();
        const timestampDiv = document.createElement('div');
        timestampDiv.style.textAlign = 'center';
        timestampDiv.style.marginTop = '2rem';
        timestampDiv.style.opacity = '0.7';
        timestampDiv.style.fontSize = '0.9rem';
        timestampDiv.innerHTML = `
          <p>üìä Stats updated: ${timestamp}</p>
          <p style="margin-top: 0.5rem;">‚è∞ Next update: ${nextUpdate}</p>
        `;
        document.querySelector('#domains-container').parentElement.appendChild(timestampDiv);
      })
      .catch(error => {
        console.error('Error loading domain stats:', error);
        const container = document.getElementById('domains-container');
        container.innerHTML = `
          <div class="card" style="text-align: center; opacity: 0.8;">
            <p>‚ö†Ô∏è Unable to load domain stats. Run <code>python3 github_domain_scraper.py</code> to generate stats.</p>
          </div>
        `;
      });
  </script>
</body>
</html>
